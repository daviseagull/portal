<div class="container-fluid">
  <div class="container">
    <h1 *ngIf="isAddMode">Adicionar rota</h1>
    <h1 *ngIf="!isAddMode">Visualizar rota</h1>
    <form (ngSubmit)="onSubmit()" [formGroup]="form">
      <div class="row g-3">

        <div class="form-group col-sm-4">
          <label>Status</label>
          <select class="form-control form-select" formControlName="status">
            <option disabled hidden selected value="">Selecione aqui</option>
            <option value="Em espera">Em espera</option>
            <option value="Finalizada">Indisponível</option>
            <option value="Em progresso">Em progresso</option>
          </select>

          <div
            *ngIf="form.controls['status'].invalid && (form.controls['status'].dirty || form.controls['status'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['status'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Status é obrigatório.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-4">
          <label>Data de Início</label>
          <input class="form-control" formControlName="startTimestamp" id="start" max="{{maxStartDate}}"
                 min="{{minStartDate}}" type="datetime-local" value="{{today}}">

          <div
            *ngIf="form.controls['startTimestamp'].invalid && (form.controls['startTimestamp'].dirty || form.controls['startTimestamp'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['startTimestamp'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Data de início é obrigatória.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-4">
          <label>Data de Término</label>
          <input class="form-control" formControlName="endTimestamp" id="end" max="{{maxStartDate}}"
                 min="{{minStartDate}}" type="datetime-local" value="{{today}}">

          <div
            *ngIf="form.controls['endTimestamp'].invalid && (form.controls['endTimestamp'].dirty || form.controls['endTimestamp'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['endTimestamp'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Data de término é obrigatória.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-6">
          <label>Endereço de início</label>
          <input class="form-control" formControlName="startAddress" type="text"/>

          <div
            *ngIf="form.controls['startAddress'].invalid && (form.controls['startAddress'].dirty || form.controls['startAddress'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['startAddress'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Endereço de início é obrigatório.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-6">
          <label>Endereço de término</label>
          <input class="form-control" formControlName="endAddress" type="text"/>

          <div
            *ngIf="form.controls['endAddress'].invalid && (form.controls['endAddress'].dirty || form.controls['endAddress'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['endAddress'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Endereço de término é obrigatório.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-6">
          <label>Preço</label>
          <input class="form-control" formControlName="price" type="text"/>

          <div
            *ngIf="form.controls['price'].invalid && (form.controls['price'].dirty || form.controls['price'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['price'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Preço é obrigatório.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-6">
          <label>Qtd. Passageiros</label>
          <input class="form-control" formControlName="passengerQuantity" type="number"/>

          <div
            *ngIf="form.controls['passengerQuantity'].invalid && (form.controls['passengerQuantity'].dirty || form.controls['passengerQuantity'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['passengerQuantity'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Qtd. Passageiros é obrigatório.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-6">
          <label>Necessita de bagageiro</label>
          <select class="form-control form-select" formControlName="needLuggageRack">
            <option disabled hidden selected value="">Selecione aqui</option>
            <option value="true">Sim</option>
            <option value="false">Não</option>
          </select>
          <div
            *ngIf="form.controls['needLuggageRack'].invalid && (form.controls['needLuggageRack'].dirty || form.controls['needLuggageRack'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['needLuggageRack'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Esta pergunta é obrigatória.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-6">
          <label>Veiculo</label>
          <input class="form-control" formControlName="vehicleId" type="text"/>

          <div
            *ngIf="form.controls['vehicleId'].invalid && (form.controls['vehicleId'].dirty || form.controls['vehicleId'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['vehicleId'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Veículo é obrigatório.
            </div>
          </div>
        </div>

        <div class="form-group col-sm-6">
          <label>Motorista</label>
          <input class="form-control" formControlName="driverId" type="text"/>

          <div
            *ngIf="form.controls['driverId'].invalid && (form.controls['driverId'].dirty || form.controls['driverId'].touched)"
            class=" alert alert-danger">
            <div *ngIf="form.controls['driverId'].errors?.['required']">
              <i class="fa-solid fa-circle-exclamation"></i> Motorista é obrigatório.
            </div>
          </div>
        </div>

      </div>
      <div *ngIf="isAddMode" class="text-center button-group">
        <button [disabled]="!form.valid" class="btn btn-success" type="submit">Salvar</button>
        <a (click)="onCancel()" class="btn btn-secondary">Cancelar</a>
      </div>

      <div *ngIf="!isAddMode" class="text-center button-group">
        <button class="btn btn-dark">Voltar</button>
      </div>
    </form>
  </div>
</div>

<ng-http-loader></ng-http-loader>
